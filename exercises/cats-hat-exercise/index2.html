<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>
  <div class="cat" style="position: absolute">
    <img src="../../imgs/cat.png" id="cat">
      <div class="hat" style="position: absolute">
        <img src="../../img/hat.png" id="hat">
      </div>
  </div>
  <script>
      ///////////////////////////////////////////////////
      // The Cat's Hat - 2
      // .hat will have absolute positions which are measured from top left corner of
      // closest enclosing element whose position is not 'static'
      var hatDiv = document.querySelector(".hat");
      var catDiv = document.querySelector(".cat");

      var angle = 0, lastTime = null;
      var center = {x: 200, y:10};
      function animate(time) {
          if (lastTime != null)
              angle += (time - lastTime) * 0.001;
          lastTime = time;
          var catCoords = {x: Math.cos(angle) * 200 + center.x,
                           y: Math.sin(angle) * 20 + center.y};
         
          catDiv.style.top = (catCoords.y) + "px";
          catDiv.style.left = (catCoords.x) + "px";
          // The following two coordinates will be relative to cat
          // because of the div setup above
          hatDiv.style.top = Math.sin(angle)*55 + "px";
          hatDiv.style.left = Math.cos(angle)*55 + "px";
          requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);
  </script>
</body>
</html>
